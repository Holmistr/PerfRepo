<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:body>
	<f:metadata>
		<f:viewParam name="testExecutionId" value="#{testExecutionController.testExecutionId}" />
		<f:event type="preRenderView" listener="#{testExecutionController.preRender}" />
	</f:metadata>
	<ui:composition template="/layout/template.xhtml">
		<ui:define name="title">#{strings.details} TestExecution -</ui:define>
		<ui:define name="content">
			<c:set target="#{testExecutionController}" property="editMode" value="#{false}" />
			<c:set target="#{testExecutionController}" property="createMode" value="#{false}" />
			<h:panelGroup id="messagesPanel">
				<h:messages errorClass="errorMessage" infoClass="infoMessage" fatalClass="errorMessage" />
			</h:panelGroup>
			<ui:include src="/testExecutionParameter/new_popup.xhtml" />
			<ui:include src="/testExecutionParameter/edit_popup.xhtml" />
			<ui:include src="/testExecutionTag/new_popup.xhtml" />
			<ui:include src="/value/new_popup.xhtml" />
			<ui:include src="/value/edit_popup.xhtml" />
			<div class="well">
			<fieldset>
					<legend>Test Execution Detail</legend>
					<h:outputLabel class="detail-label">ID</h:outputLabel><div class="detail-value">#{testExecutionController.testExecution.id}</div>
					<h:outputLabel class="detail-label">#{entityStrings.TestExecution_name}</h:outputLabel><div class="detail-value">#{testExecutionController.testExecution.name}</div>
					<h:outputLabel class="detail-label">#{entityStrings.TestExecution_test}</h:outputLabel><div class="detail-value"><a href="/repo/test/#{testExecutionController.testExecution.test.id}">#{testExecutionController.testExecution.test.name}</a></div>
					<h:outputLabel class="detail-label">Owner</h:outputLabel><div class="detail-value">#{testExecutionController.testExecution.test.groupId}</div>					
			</fieldset>	
			</div>		
			<h:form>
			<rich:tabPanel switchType="ajax">
		
		<rich:tab header="Values" id="tabValues">
			<h:form id="testExecutionValueList">
				<rich:dataTable id="testExecutionValueTable" value="#{testExecutionController.values}" var="item" columnClasses="n,numvalcolumn,n,n,n" styleClass="table table-bordered table-striped table-hover">
					<rich:column sortable="true" sortOrder="#{testExecutionController.sortsOrders['metric_name']}" sortBy="#{item.metricName}">
						<f:facet name="header">
							<a4j:commandLink value="#{entityStrings.Value_metric}" render="testExecutionValueTable" action="#{testExecutionController.sort()}">
								<f:param name="sortProperty" value="metric_name" />
								<f:ajax render="testExecutionValueTable" />
							</a4j:commandLink>
						</f:facet>
						<h:outputText value="#{item.metricName}" />
					</rich:column>
					<rich:column sortable="true" sortOrder="#{testExecutionController.sortsOrders['resultValue']}" sortBy="#{item.metricValue}">
						<f:facet name="header">
							<a4j:commandLink value="#{entityStrings.Value_resultValue}" render="testExecutionValueTable" action="#{testExecutionController.sort()}">
								<f:param name="sortProperty" value="resultValue" />
								<f:ajax render="testExecutionValueTable" />
							</a4j:commandLink>
						</f:facet>
						<h:outputText value="#{item.metricValue}" />
					</rich:column>
					<rich:column sortable="true" sortOrder="#{testExecutionController.sortsOrders['paramName']}" sortBy="#{item.paramName}">
						<f:facet name="header">
							<a4j:commandLink value="Parameter name" render="testExecutionValueTable" action="#{testExecutionController.sort()}">
								<f:param name="sortProperty" value="paramName" />
								<f:ajax render="testExecutionValueTable" />
							</a4j:commandLink>
						</f:facet>
						<h:outputText value="#{item.paramName}" />
					</rich:column>
					<rich:column sortable="true" sortOrder="#{testExecutionController.sortsOrders['paramValue']}" sortBy="#{item.paramValue}">
						<f:facet name="header">
							<a4j:commandLink value="Parameter value" render="testExecutionValueTable" action="#{testExecutionController.sort()}">
								<f:param name="sortProperty" value="paramValue" />
								<f:ajax render="testExecutionValueTable" />
							</a4j:commandLink>
						</f:facet>
						<h:outputText value="#{item.paramValue}" />
					</rich:column>
					<h:column headerClass="button-header">
						<f:facet name="header">
							<a4j:commandButton styleClass="button-plus" render="testExecutionValueNewPopupForm" action="#{testExecutionController.createValue()}"
								oncomplete="#{rich:component('testExecutionValueNewPopup')}.show();" value=" " alt="#{strings.new_m}" title="#{strings.new_m}" />
						</f:facet>
						<a4j:commandButton styleClass="button-edit" render="testExecutionValueEditPopupForm" action="#{testExecutionController.setValue(item)}"
							oncomplete="#{rich:component('testExecutionValueEditPopup')}.show();" value=" " alt="#{strings.edit}" title="#{strings.edit}" />
						<a4j:commandButton styleClass="button-minus" value=" " alt="#{strings.delete}" title="#{strings.delete}"
							onclick="if (!confirm('Are you sure you want to delete value #{item.metricValue} for metric #{item.metricName}?') ) { return false;}; return true;"
							action="#{testExecutionController.deleteValue(item)}" render="testExecutionValueList" />
					</h:column>
				</rich:dataTable>
			</h:form>
		</rich:tab>
		<rich:tab header="Parameters" id="tabParameters">
			<h:form id="testExecutionParameterList">
				<rich:dataTable id="testExecutionParameterTable" value="#{testExecutionController.testExecutionParameters}" var="item" styleClass="table table-bordered table-striped table-hover">
					<rich:column sortable="true" sortOrder="#{testExecutionController.sortsOrders['name']}" sortBy="#{item.name}">
						<f:facet name="header">
							<a4j:commandLink value="#{entityStrings.TestExecutionParameter_name}" render="testExecutionParameterTable" action="#{testExecutionController.sort()}">
								<f:param name="sortProperty" value="name" />
								<f:ajax render="testExecutionParameterTable" />
							</a4j:commandLink>
						</f:facet>
						<h:outputText value="#{item.name}" />
					</rich:column>
					<rich:column sortable="true" sortOrder="#{testExecutionController.sortsOrders['value']}" sortBy="#{item.value}">
						<f:facet name="header">
							<a4j:commandLink value="#{entityStrings.TestExecutionParameter_value}" render="testExecutionParameterTable" action="#{testExecutionController.sort()}">
								<f:param name="sortProperty" value="value" />
								<f:ajax render="testExecutionParameterTable" />
							</a4j:commandLink>
						</f:facet>
						<h:outputText value="#{item.value}" />
					</rich:column>
					<rich:column>
						<f:facet name="header"></f:facet>
						<a4j:commandButton styleClass="button-edit" render="testExecutionParameterEditPopupForm"
							action="#{testExecutionController.setTestExecutionParameter(item)}" oncomplete="#{rich:component('testExecutionParameterEditPopup')}.show();" value=" "
							alt="#{strings.edit}" title="#{strings.edit}" />
					</rich:column>
					<rich:column>
						<f:facet name="header"></f:facet>
						<a4j:commandButton styleClass="button-minus" value=" " alt="#{strings.delete}" title="#{strings.delete}"
							onclick="if (!confirm('Are you sure you want to delete test execution parameter (#{item.name})?') ) { return false;}; return true;"
							action="#{testExecutionController.deleteTestExecutionParamenter(item)}" render="testExecutionParameterList :messagesPanel" />
					</rich:column>
				</rich:dataTable>
				<a4j:commandButton styleClass="button-plus" render="testExecutionParameterNewPopupForm" action="#{testExecutionController.newTestExecutionParameter()}"
					oncomplete="#{rich:component('testExecutionParameterNewPopup')}.show();" value=" " alt="#{strings.new_m}" title="#{strings.new_m}" />
			</h:form>
		</rich:tab>
		<rich:tab header="Tags" id="tabTags">
			<div class="tags">
				<ui:repeat value="#{testExecutionController.testExecution.sortedTags}" varStatus="status" var="item">
					<span class="tag">#{item}</span>
				</ui:repeat>
			</div>
		</rich:tab>
		<rich:tab header="Attachments" id="tabAttachments">
			<h:form id="attachmentList">
				<rich:dataTable id="attachmentTable" styleClass="table table-bordered table-striped table-hover" rowClasses="table-row" columnClasses="common-column,common-column,common-column,button-column"
					headerClass="table-header" footerClass="table-footer" value="#{testExecutionController.attachments}" var="item" cellspacing="0" cellpadding="0">
					<rich:column sortable="true" sortOrder="#{testExecutionController.sortsOrders['attachment_filename']}" sortBy="#{item.filename}">
						<f:facet name="header">
							<a4j:commandLink value="#{entityStrings.TestExecutionAttachment_filename}" render="attachmentTable" action="#{testExecutionController.sort()}">
								<f:param name="sortProperty" value="attachment_name" />
								<f:ajax render="attachmentTable" />
							</a4j:commandLink>
						</f:facet>
						<h:outputLink value="#{testExecutionController.getDownloadLink(item)}">
							<h:outputText value="#{item.filename}" />
						</h:outputLink>
					</rich:column>

					<rich:column sortable="true" sortOrder="#{testExecutionController.sortsOrders['attachment_mimetype']}" sortBy="#{item.mimetype}">
						<f:facet name="header">
							<a4j:commandLink value="#{entityStrings.TestExecutionAttachment_mimetype}" render="attachmentTable" action="#{testExecutionController.sort()}">
								<f:param name="sortProperty" value="resultValue" />
								<f:ajax render="attachmentTable" />
							</a4j:commandLink>
						</f:facet>
						<h:outputText value="#{item.mimetype}" />
					</rich:column>

				</rich:dataTable>
			</h:form>
		</rich:tab>
	</rich:tabPanel>
	</h:form>	
	
		</ui:define>
	</ui:composition>
</h:body>
</html>